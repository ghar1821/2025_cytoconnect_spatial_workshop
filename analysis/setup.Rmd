---
title: "setup"
author: "Givanna Putri"
date: "2025-10-02"
output: workflowr::wflow_html
editor_options:
  chunk_output_type: console
---

Please ensure you follow the instructions below **prior** to attending the workshop.

## Data download

Data for all the workshop exercises can be downloaded from OneDrive at this link: https://drive.google.com/drive/folders/1iEmdlpQ_CT4tK9N2vTfpg4CwxaG1djAT.

Create a folder somewhere on your computer (e.g. 
`C:/2025_cytoconnect_spatial_workshop/` or `/Users/yourname/2025_cytoconnect_spatial_workshop/`
) to store all the files related for this workhop.
Create a `data` folder within it and download all the data files into that folder.

Afterwards, under the `visium` folder, create a new folder called `extdata`. 
We will use this folder to store all the intermediate analysis files we generate during the workshop.

Your folder structure should look like this:
```
2025_cytoconnect_spatial_workshop/
└── data
    ├── imc
    │   ├── measurements.csv
    │   └── tif_files
    │       └── originalimages
    │           ├── aSMA.tif
    │           ├── Axl.tif
    │           ├── CCR6.tif
    │           └── ...
    │
    └── visium
        ├── extdata
        ├── spatial
        │   ├── aligned_fiducials.jpg
        │   ├── aligned_tissue_image.jpg
        │   └── ...
        ├── sc_seurat_object_10x.qs2
        ├── spots_to_remove_v2.csv
        └── Visium_V2_Human_Colon_Cancer_P2_filtered_feature_bc_matrix.h5
```


## Software installation

You need to download the following softwares and install them on your computer prior to the workshop:

- Qupath 0.6.0: https://qupath.readthedocs.io/en/stable/index.html
- ImageJ: https://imagej.net/ij/
- DeepCell ImageJ plugin: https://github.com/vanvalenlab/kiosk-imageJ-plugin
- R: https://www.r-project.org/
- RStudio: https://posit.co/download/rstudio-desktop/

After installing R and RStudio, please install the required R packages.
You can do this by running the code blocks below in RStudio.

Please install the packages that we will be using in the workshop by running
the code block below.

```{r, eval=FALSE}

cran_packages <- c(
  "Seurat", "ggplot2", "scales", "patchwork", "qs2",
  "viridis", "pak", "here", "tidyverse", "uwot", "pheatmap"
)

install.packages(cran_packages)

# RCTD only available on Github
pak::pkg_install("dmcable/spacexr")

bioc_packages <- c()
if(length(bioc_packages) > 0) {BiocManager::install(bioc_packages)}

```

Running this chunk will let you know if the packages have been installed properly. 

```{r eval=FALSE}
checkSetup <- function() {
  library(cli)
  cat("\n--------------------------------------\n")
  cat(style_bold(col_magenta("\n***Installing General Packages***\n\n")))
  not <- c(); not2 <- c()
  packages1 <- c(cran_packages, bioc_packages)#, "Test")
  for (i in 1:length(packages1)){
    if(requireNamespace(packages1[i], quietly = TRUE)==F) {
      cat(paste(style_bold(col_red(packages1[i])), "has not been installed\n"))
      not <- c(not,i)
    } else {
      suppressWarnings(suppressMessages(library(as.character(packages1[i]), character.only = TRUE)))
      cat(col_yellow(packages1[i]), "is loaded!\n")
    }
  }
  cat("\n--------------------------------------\n")
  if (length(not) > 0){
    cat(style_bold(bg_red("\n  **IMPORTANT**  ")),
        style_bold(col_yellow("\n\nYou need to install: \n")),
        paste(paste(c(packages1[not]), collapse=", ")),
        "\n\n--------------------------------------",
        "\n\n Use:\n - install.packages(),\n - BiocManager::install() or, \n - use Google to find installation instructions.\n\n", style_bold(col_green("Then run this function again!\n\n")))
  } else {
    cat("",col_green(style_bold("\n All packages are loaded!\n\n Happy Coding! :)\n\n")))
  }
}
checkSetup()
```

If you have any problems, please reach out to either:

- [Thomas O'Neil](mailto:thomas.oneil@sydney.edu.au)
- [Givanna Putri](mailto:putri.g@wehi.edu.au)

## Session Info

```{r}
sessionInfo()
```
